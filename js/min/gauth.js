function handleClientLoad(){gapi.load("client:auth2",initClient)}function initClient(){gapi.client.init({apiKey:API_KEY,clientId:CLIENT_ID,discoveryDocs:DISCOVERY_DOCS,scope:SCOPES}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus),updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get()),authorizeButton.onclick=handleAuthClick,signoutButton.onclick=handleSignoutClick,refreshButton.onclick=handleRefreshClick})}function updateSigninStatus(e){e?(authorizeButton.classList.add("is-hidden"),signoutButton.classList.remove("is-hidden"),refreshButton.classList.remove("is-hidden"),getData()):(authorizeButton.classList.remove("is-hidden"),signoutButton.classList.add("is-hidden"),refreshButton.classList.add("is-hidden"))}function handleAuthClick(e){localStorage.clear(),gapi.auth2.getAuthInstance().signIn()}function handleSignoutClick(e){localStorage.clear(),gapi.auth2.getAuthInstance().signOut(),location.reload()}function handleRefreshClick(e){localStorage.clear(),getData()}function appendPre(e){var t=document.getElementById("content"),a=document.createTextNode(e+"\n");t.appendChild(a)}function getData(){toggleRefreshButton(),forceRefresh=localStorage.getItem("forceRefresh"),forceRefresh&&localStorage.clear(),(data=localStorage.getItem("gdata"))?(data=JSON.parse(data),initFrontPage(data),toggleRefreshButton()):gapi.client.sheets.spreadsheets.values.get({spreadsheetId:"1WIdnoOnyQkRFGfwXYySOR-nK5pB6KqwN6aKapOe3vRA",range:"Vocabulario"}).then(function(e){data={};var t=e.result;if(t.values.length>0){for(i=1;i<t.values.length;i++)for(j=0;j<8;j++)data[t.values[0][j]]||(data[t.values[0][j]]=[]),data[t.values[0][j]].push((t.values[i][j]||"").toLowerCase().trim());localStorage.setItem("gdata",JSON.stringify(data)),toggleRefreshButton(),location.reload()}else appendPre("No data found.")},function(e){appendPre("Error: "+e.result.error.message)})}function writeData(e,t){var a={spreadsheetId:"1WIdnoOnyQkRFGfwXYySOR-nK5pB6KqwN6aKapOe3vRA",range:e,majorDimension:"ROWS",valueInputOption:"USER_ENTERED",values:[[t]]};gapi.client.sheets.spreadsheets.values.update(a).then(function(e){},function(e){appendPre("Error: "+e.result.error.message)})}function toggleRefreshButton(){refreshButton.getElementsByTagName("i")[0].classList.toggle("fa-spin")}var CLIENT_ID="245771448899-d2ie87n0pmlsm3r77eh7u76p4f1hh2a8.apps.googleusercontent.com",API_KEY="AIzaSyAPrkvQe0v8JxApzsjVrTb8-TiG4wuhKDo",DISCOVERY_DOCS=["https://sheets.googleapis.com/$discovery/rest?version=v4"],SCOPES="https://www.googleapis.com/auth/spreadsheets",authorizeButton=document.getElementById("authorize-button"),signoutButton=document.getElementById("signout-button"),refreshButton=document.getElementById("refresh-button"),data={};
